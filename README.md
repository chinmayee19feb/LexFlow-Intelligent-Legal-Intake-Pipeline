# LexFlow — Intelligent Legal Intake Pipeline

> Automatically receive client legal inquiries, classify them using AI, generate a personalized response, route to the correct attorney, and surface operational metrics — all within 90 seconds, zero human intervention.

## Demo

- **Intake Form:** http://lexflow-intake-form-097659826330.s3-website-us-east-1.amazonaws.com
- **Dashboard:** http://lexflow-dashboard-097659826330.s3-website-us-east-1.amazonaws.com

## Architecture
```
Client Form → API Gateway → Lambda → Claude AI → DynamoDB + SES Emails
                                   → Dashboard Lambda → Metrics
```

## Stack

- **AI:** Anthropic Claude (claude-haiku-4-5)
- **Compute:** AWS Lambda (Python 3.12)
- **Database:** AWS DynamoDB
- **Email:** AWS SES
- **Frontend:** S3 Static Website
- **Infrastructure:** CloudFormation (14 resources, 1 command deploy)

## Features

- AI classifies case type, viability score (1-10), urgency, statute of limitations flag
- Personalized client acknowledgment email generated by AI
- Attorney alert email with color-coded urgency and key facts
- Live operations dashboard with charts and metrics
- Graceful degradation — never loses a submission even if AI fails
- Full infrastructure as code — deploy everything with one command

## Project Structure
```
lexflow/
├── lexflow-intake/          # Main Lambda function
│   ├── handler.py           # Entry point + orchestration
│   ├── ai_classifier.py     # Claude API integration
│   ├── prompt.py            # System prompt + user template
│   ├── emailer.py           # SES email sending
│   ├── db.py                # DynamoDB operations
│   ├── requirements.txt     # Python dependencies
│   └── test_classifier.py   # 15-case stress test suite
├── lexflow-dashboard/       # Dashboard Lambda function
│   ├── handler.py           # Aggregation + metrics
│   └── db.py                # DynamoDB scan
├── intake-form/
│   └── index.html           # Client-facing intake form
├── dashboard/
│   └── index.html           # Ops dashboard with charts
├── cloudformation.yaml      # Complete AWS infrastructure
├── deploy.sh                # One-command deploy script
└── README.md
```

## Deploy
```bash
# 1. Store your Anthropic API key in SSM
aws ssm put-parameter \
  --name /lexflow/anthropic-api-key \
  --value "sk-ant-..." \
  --type SecureString \
  --region us-east-1

# 2. Deploy infrastructure
aws cloudformation deploy \
  --template-file cloudformation.yaml \
  --stack-name lexflow \
  --capabilities CAPABILITY_NAMED_IAM \
  --region us-east-1 \
  --parameter-overrides \
    AttorneyEmail="your@email.com" \
    FromEmail="your@email.com"

# 3. Package and upload Lambda code
cd lexflow-intake
pip install --platform manylinux2014_x86_64 --target ./package \
  --implementation cp --python-version 3.12 --only-binary=:all: anthropic
cp handler.py ai_classifier.py prompt.py emailer.py db.py ./package/
cd package && zip -r ../intake-lambda.zip . && cd ..
aws lambda update-function-code \
  --function-name lexflow-intake \
  --zip-file fileb://intake-lambda.zip \
  --region us-east-1

# 4. Upload frontend
aws s3 cp intake-form/index.html s3://YOUR-BUCKET/index.html --content-type "text/html"
aws s3 cp dashboard/index.html s3://YOUR-DASHBOARD-BUCKET/index.html --content-type "text/html"
```

## Test
```bash
cd lexflow-intake
export ANTHROPIC_API_KEY=sk-ant-...
python3 test_classifier.py
# Expected: 15/15 passing
```

## Built for

Hackathon project demonstrating AI-powered legal intake automation.
